

#### 컬렉션 타입의 프로퍼티 값 설정 - 배열

ex05

```java
public class Exam01 {
  public static void main(String[] args) {
    ApplicationContext iocContainer = new ClassPathXmlApplicationContext(//
        "com/eomcs/spring/ioc/ex05/a/application-context.xml");

    System.out.println(iocContainer.getBean("c1"));
    System.out.println(iocContainer.getBean("c2"));
  }
}
------------------------------------------------
실행결과 & 설정파일    
------------------------------------------------
Car [model=null, maker=null, cc=0, engine=null, tires=[Tire [maker=금호타이어,width=180, ratio=0, wheel=0], Tire [maker=금호타이어, width=180, ratio=0, wheel=0], 
                                                       
Tire [maker=한국타이어, width=180, ratio=0, wheel=0], Tire [maker=한국타이어, width=180, ratio=0, wheel=0], Tire [maker=비트타이어, width=100, ratio=0, wheel=0]]]

    <bean id="c1" class="com.eomcs.spring.ioc.ex05.Car">
    // 배열 프로퍼티 값 설정하기
        <property name="tires">
            <array> //배열 프로퍼티 값을 설정할떄는 <array> 태그를 사용한다
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="금호타이어" p:width="180"/>
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="금호타이어" p:width="180"/>
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="한국타이어" p:width="180"/>
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="한국타이어" p:width="180"/>
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="비트타이어" p:width="100"/>
            </array>
        </property>
    </bean>   
    
    
Car [model=null, maker=null, cc=0, engine=null, tires=[Tire [maker=금호타이어, width=180, ratio=0, wheel=0], Tire [maker=금호타이어, width=180, ratio=0, wheel=0],
                                                       
Tire [maker=한국타이어, width=180, ratio=0, wheel=0], Tire [maker=한국타이어, width=180, ratio=0, wheel=0], Tire [maker=비트타이어, width=100, ratio=0, wheel=0]]]

<bean id="c2" class="com.eomcs.spring.ioc.ex05.Car">
        <!-- 배열 프로퍼티 값 설정하기 -->
        <property name="tires">
            <list>    // <array> 태그 대신 <list> 태그를 사용해도 결과는 같다
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="금호타이어" p:width="180"/>
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="금호타이어" p:width="180"/>
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="한국타이어" p:width="180"/>
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="한국타이어" p:width="180"/>
                <bean class="com.eomcs.spring.ioc.ex05.Tire" 
                      p:maker="비트타이어" p:width="100"/>
            </list>
        </property>
    </bean>   

```

---

### 팩토리 메서드 호출 - static 메서드 호출

ex06

```java
public class Exam01 {
  public static void main(String[] args) {
    Car c = CarFactory.create("티코");
    ApplicationContext iocContainer =
        new ClassPathXmlApplicationContext("com/eomcs/spring/ioc/ex06/application-context-01.xml");
    System.out.println(iocContainer.getBean("c1"));
    System.out.println(iocContainer.getBean("c2"));
    System.out.println(iocContainer.getBean("c3"));
  }
}
------------------------------------------------
실행결과 & 설정파일    
------------------------------------------------
Car [model=Tico, maker=대우자동차, cc=890]
<bean id="c1" class="com.eomcs.spring.ioc.ex06.CarFactory"
            //class="스태틱 메서드가 들어있는 클래스 이름"
          factory-method="create">
        //factory-method="스태틱 메서드 이름"    
        <constructor-arg value="티코"/>
    </bean>
 //위 코드를 자바 코드로 변경하면
 //Object obj = CarFactory.create("티코");
 //objPool.put("c1",obj); 
 //가 된다.

Car [model=Sonata, maker=현대자동차, cc=1980]
    
Car [model=자바휘웅, maker=비트자동차, cc=5000]
    
```

---

### 팩토리 메서드 호출 - static 메서드 호출 응용

```java
public class Exam02 {
  public static void main(String[] args) {
    ApplicationContext iocContainer = new ClassPathXmlApplicationContext(
        "bitcamp/java106/step06/application-context-02.xml");
      
    Date date = (Date) iocContainer.getBean("d1");
      
    System.out.println(date);
  }
}
------------------------------------------------
실행결과 & 설정파일    
------------------------------------------------
2018-05-04
//팩토리 메서드를 통해 객체를 만들기 - 응용
// "yyyy-MM-dd" 형식의 문자열을 가지고 java.sql.Date 객체 만들기   
<bean id="d1" class="java.sql.Date"
    //자바가 기본적으로 제공하는 Date 클래스
  factory-method="valueOf">
    //자바가 기본적으로 제공하는 Date 클래스의 valueOf메서드
  <constructor-arg value="2018-05-04"/>
    //값 설정
</bean>
```

---

### 팩토리 메서드 호출 - 인스턴스 메서드 호출

```java
public class Exam03 {
  public static void main(String[] args) {
    ApplicationContext iocContainer =
        new ClassPathXmlApplicationContext(
        "com/eomcs/spring/ioc/ex06/application-context-03.xml");
    System.out.println(iocContainer.getBean("c1"));
  }
}
------------------------------------------------
실행결과 & 설정파일    
------------------------------------------------
Car [model=null, maker=SM5, cc=1990]
    
//팩토리 메서드를 통해 객체를 만들기 : 인스턴스 메서드 호출
<bean id="carFactory" class="com.eomcs.spring.ioc.ex06.CarFactory2"/>
//carFactory 아이디의 클래스는 CarFactory2이다
//CarFactory클래스의 create메서드에는 maker,cc값을 설정하는 메서드가 있다

<bean id="c1" factory-bean="carFactory"
//factory-bean 속성을 설정하면 factory-method는 스태틱메서드가 아니라 인스턴스 메서드를
//가리키게 된다. c1 아이디에서 위 carFactory아이디를 호출한다
          factory-method="create">
         //호출한 carFactory의 create메서드 호출
        <constructor-arg value="SM5"/>
    //메서드에서 받은 파라미터값이 SM5이기 때문에 maker는 sm5 , cc는 1990으로 설정된다.
    //case "SM5":
    //    c.setMaker("르노삼성자동차");
    //    c.setMaker("SM5");
    //    c.setCc(1990);
    //    return c;
    
    //자바 코드로 표현하면
    //CarFactory2 carFactory = new CarFactory2();
    //Object obj = carFactory.create("SM5");
    //objPool.put("c1",obj);    
    
    </bean>        
```

---

### 팩토리 메서드 호출 - FactoryBean 구현체

```java
public class Exam04 {
  public static void main(String[] args) {
    ApplicationContext iocContainer =
        new ClassPathXmlApplicationContext("com/eomcs/spring/ioc/ex06/application-context-04.xml");
    System.out.println(iocContainer.getBean("c1"));
  }
}
------------------------------------------------
실행결과 & 설정파일    
------------------------------------------------
CarFactory3() 생성자 호출됨.
CarFactory3.setModel() 호출됨.
CarFactory3.getObjectType() 호출됨.
CarFactory3.getObject() 호출됨.
Car [model=Sonata, maker=현대자동차, cc=1980]

//팩토리 메서드를 통해 객체를 만들기 : 스프링 규칙에 따라 만들기
<bean id="c1" class="com.eomcs.spring.ioc.ex06.CarFactory3">
  <property name="model" value="소나타"/>
//value에 소나타를 넣어줬기때문에 실행결과로 
//Car [model=Sonata, maker=현대자동차, cc=1980]
    
</bean>
//위 코드를 자바 코드로 표현하면
//CarFactory3 carFactory = new CarFactory3();
//carFactory.setModel("소나타");
//Object obj = null;
//FactoryBean의 구현체 여부에 따라 "c1"이라는 이름으로 저장할 객체가 다르다.
//if (carFactory instanceo	f FactoryBean) {        //carFactory에 구현체가 있으면
//   obj = carFactory.getObject();                //해당구현체를 obj에 저장하고
// } else {                                       //해당구현체가 없으면
//   obj = carFactory;                            //기존 carFactory를
//  }
// objPool.put("c1",obj);                         //저장한다.
    
```

---

### 팩토리 메서드 호출 - FactoryBean 구현체

```java
public class Exam05 {
  public static void main(String[] args) {
           new ClassPathXmlApplicationContext(
               "com/eomcs/spring/ioc/ex06/application-context-05.xml");


    // 이 예제는 Exam04 예제와 같다.
    // 다만 Factory 클래스의 이름을 CarFactory3에서 CarFactoryBean으로 바꾼 것이다.
    System.out.println(iocContainer.getBean("c1"));
  }
}
------------------------------------------------
실행결과 & 설정파일    
------------------------------------------------
CarFactoryBean() 생성자 호출됨.
CarFactoryBean.setModel() 호출됨.
CarFactoryBean.getObjectType() 호출됨.
CarFactoryBean.getObject() 호출됨.
Car [model=Sonata, maker=현대자동차, cc=1980]

<bean id="c1" class="com.eomcs.spring.ioc.ex06.CarFactoryBean">
           //클래스 이름이 FactoryBean으로 끝나면
           //그 클래스가 FactoryBean 구현체임을 쉽게 눈치챌 수 있다.
        <property name="model" value="소나타"/>
    </bean>
 //위 코드를 자바 코드로 표현하면 
 //CarFactoryBean carFactory = new CarFactoryBean();
 //       carFactory.setModel("소나타");            
 //           Object obj = null;
 // FactoryBean의 구현체 여부에 따라 "c1" 이라는 이름으로 저장할 객체가 다르다.
 //if (carFactory instanceof FactoryBean) {
 //obj = carFactory.getObject();
 //} else {
 //obj = carFactory;
 //}
 //objPool.put("c1", obj);
```

---

ex07 할차례

ex08까지 

ex08예제 공부할때 Resource 애노테이션이 들어있는 API 사용하기(build.gradle 편집)

- javax.annotation 으로 검색 1.3.2이상 버전 사용

