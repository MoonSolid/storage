---

## v16>v17

- BoardList , MemberList , LessonList 를 ArrayList로 통합관리하기

  

ArrayList 클래스 만들기

BoardList를 복사해서 ArrayList에 붙여넣기



배열의 이름을 Board에서 Object로 변경해주기 

변경 후 

```
Board[] list;
```

변경 후

```
Object[] list;
```



따라서 생성자명도 Board에서 Array로 변경

변경 전

```
public BoardList() {
    this.list = new Board[DEFAULT_CAPACITY];
  }
```

변경 후

```
public ArrayList() {
    this.list = new Object[DEFAULT_CAPACITY];
  }
```



변경 전

```
public BoardList(int capacity) {
    if (capacity < DEFAULT_CAPACITY || capacity > 10000)
      this.list = new Board[DEFAULT_CAPACITY];
    else 
      this.list = new Board[capacity];
  }
```

변경 후

```
 public ArrayList(int capacity) {
    if (capacity < DEFAULT_CAPACITY || capacity > 10000)
      this.list = new Object[DEFAULT_CAPACITY];
    else 
      this.list = new Object[capacity];
  }
```

변경 전

```
public Board[] toArray() {
    /*
    Board[] arr = new Board[this.size];
    for (int i = 0; i < this.size; i++) {
      arr[i] = this.list[i];
    }
    return arr;
    */
    return Arrays.copyOf(this.list, this.size);
  }
```

변경 후

```
public Object[] toArray() {
    /*
    Board[] arr = new Board[this.size];
    for (int i = 0; i < this.size; i++) {
      arr[i] = this.list[i];
    }
    return arr;
     */
    return Arrays.copyOf(this.list, this.size);
  }
```

변경 전

```
public void add(Board board) {
    if (this.size == this.list.length) {
      // 현재 배열에 게시글 객체가 꽉 찼으면, 배열을 늘린다.
      int oldCapacity = this.list.length;
      int newCapacity = oldCapacity + (oldCapacity >> 1);
      /*
      Board[] arr = new Board[newCapacity];
      for (int i = 0; i < this.list.length; i++) {
        arr[i] = this.list[i];
      }
      this.list = arr;
      */
      this.list = Arrays.copyOf(this.list, newCapacity);
      System.out.printf("새 배열을 %d 개 생성하였음!", newCapacity);
    }
    this.list[this.size++] = board;
  }
```

변경 후

```
 public void add(Object obj) {
    if (this.size == this.list.length) {
      // 현재 배열에 게시글 객체가 꽉 찼으면, 배열을 늘린다.
      int oldCapacity = this.list.length;
      int newCapacity = oldCapacity + (oldCapacity >> 1);
      this.list = Arrays.copyOf(this.list, newCapacity);

      System.out.printf("새 배열을 %d 개 생성하였음!", newCapacity);
    }
    this.list[this.size++] = obj;
  }

```

변경 전

```
 public Board get(int no) {
    for (int i = 0; i < this.size; i++) {
      if (this.list[i].getNo() == no) {
        return this.list[i];
      }
    }
    return null;
  }
}

```

변경 후

```
public Object get(int idx) {
    if (idx >= 0 && idx < this.size) {
      return this.list[idx];
    } else {
      return null;
    }

  }
```

BoardList , MemberList , LessonList 를 삭제



각 핸들러 수정

BoardHandler 기준

ArrayList 클래스를 사용하기 위해서 기존 코드 수정

변경 전

```
 BoardList boardList;
```

변경 후

```
ArrayList boardList;
```



생성자 초기화 문장 수정

변경 전

```
 public BoardHandler(Scanner input) {
    this.input = input;
    this.boardList = new BoardList();
  }
```

변경 후

```
public BoardHandler(Scanner input) {
    this.input = input;
    boardList = new ArrayList();
  }
```



사이즈 생성자 수정



변경 전 

```
public BoardHandler(Scanner input, int capacity) {
    this.input = input;
    this.boardList = new BoardList(capacity);
  }
```

변경 후

```
public BoardHandler(Scanner input, int capacity) {
    this.input = input;
    boardList = new ArrayList(capacity);
  }
 
```



출력 부분 수정 

변경 전

```
  public void listBoard() {
    Board[] boards = this.boardList.toArray();
    for (Board b : boards) {
      System.out.printf("%d, %s, %s, %d\n", 
          b.getNo(), b.getTitle(), b.getDate(), b.getViewCount());
    }
  }
```

변경 후

```
public void listBoard() {
    Object[] arr = this.boardList.toArray();
    for (Object obj : arr) {
      Board b = (Board) obj;
      System.out.printf("%d, %s, %s, %d\n", 
          b.getNo(), b.getTitle(), b.getDate(), b.getViewCount());
      
    }
  }
```



#### add 부분 수정

변경 전

```
public void addBoard() {
    Board board = new Board();
    
    System.out.print("번호? ");
    board.setNo(input.nextInt());
    input.nextLine(); // 줄바꿈 기호 제거용

    System.out.print("내용? ");
    board.setTitle(input.nextLine());

    board.setDate(new Date(System.currentTimeMillis()));
    board.setViewCount(0);
    
    this.boardList.add(board);
    
    System.out.println("저장하였습니다.");
  }
```

변경 후

```
public void addBoard() {
    Board board = new Board();
    
    System.out.print("번호? ");
    board.setNo(input.nextInt());
    input.nextLine(); // 줄바꿈 기호 제거용

    System.out.print("내용? ");
    board.setTitle(input.nextLine());

    board.setDate(new Date(System.currentTimeMillis()));
    board.setViewCount(0);
    
    boardList.add(board);
    
    System.out.println("저장하였습니다.");
  }
```



#### 디테일 부분 

변경 전

```
public void detailBoard() {
    System.out.print("게시물 번호? ");
    int no = input.nextInt();
    input.nextLine(); // 숫자 뒤의 남은 공백 제거
    
    Board board = this.boardList.get(no);
    
    if (board == null) {
      System.out.println("게시물 번호가 유효하지 않습니다.");
      return;
    }
```

변경 후

```
 public void detailBoard() {
    System.out.print("게시물 인덱스? ");
    int index = input.nextInt();
    input.nextLine(); // 숫자 뒤의 남은 공백 제거
    
    Board board = (Board) this.boardList.get(index);
    
    if (board == null) {
      System.out.println("게시물 인덱스가 유효하지 않습니다.");
      return;
    }
```

